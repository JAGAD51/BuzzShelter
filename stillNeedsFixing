1) addUser is called out of order?
2) Query logic is wrong
